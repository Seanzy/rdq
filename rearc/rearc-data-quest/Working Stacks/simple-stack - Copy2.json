{
    "AWSTemplateFormatVersion": "2010-09-09",

    "Description": "Rearc Data Quest",

    "Parameters": { 
        "Environment": {
            "Description": "Environment to deploy in", 
            "Type": "String",
            "Default": "nprd"
        },
        "SourceCodeBucket": {
            "Description": "Bucket for lambda function code", 
            "Type": "String",
            "Default": "seanzy-code-source-bucket"
        },
        "ApiUrl": {
            "Description": "Part 2 API URL",
            "Type": "String",
            "Default": "https://datausa.io/api/data?drilldowns=Nation&measures=Population"
        },
        "BaseUrl": {
            "Description": "Part 1 API URL",
            "Type": "String",
            "Default": "https://download.bls.gov/pub/time.series/"
        },
        "RearcBucket": {
            "Description": "Bucket that contains files synced from the BASE_URL website",
            "Type": "String",
            "Default": "rearc-data-quest"
        },
        "RearcTable": {
            "Description": "DynamoDB table that contains metadata of files synced from BASE_URL w`ebsite",
            "Type": "String",
            "Default": "rearc-data-quest"
        }
    },

    "Resources": {
        "RearcDataQuestFunction": {
                "Type" : "AWS::Lambda::Function",
                "Properties" : {
                    "Code": {
                        "S3Bucket": {"Ref": "SourceCodeBucket"},
                        "S3Key": "rearc-data-quest.zip"
                    },
                    "Description" : "RDQ",
                    "EphemeralStorage" : {
                        "Size": 1024
                    },
                    "Handler": "lambda_function.lambda_handler",
                    "Runtime": "python3.9",
                    "FunctionName" : "sean1",
                    "Role" : "arn:aws:iam::169938143887:role/service-role/rearc-data-quest-role",
                    "Runtime" : "python3.9"
                  }
              }
    },

    "Outputs": {}

}




